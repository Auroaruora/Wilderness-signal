[gd_scene load_steps=5 format=3 uid="uid://df6ey4bocdehf"]

[ext_resource type="Script" path="res://script/item.gd" id="1_blvnl"]
[ext_resource type="Texture2D" uid="uid://boumbvn08wrt6" path="res://resources/assets/material/wood.png" id="2_v062m"]

[sub_resource type="GDScript" id="GDScript_rxior"]
script/source = "# SingleSlot.gd
class_name SingleSlot
extends Panel

# Export the item resource so it can be set in the editor
@export var item_resource: Item = null

# References to child nodes
@onready var background_sprite = $BackgroundSprite
@onready var item_sprite = $ItemSprite
@onready var stack_label = $Number

func _ready():
	# Initialize with the exported resource if available
	if item_resource:
		set_item(item_resource)
	else:
		clear_slot()

# Update the slot with a new item
func set_item(new_item: Item):
	item_resource = new_item
	
	if item_resource == null:
		clear_slot()
		return
	
	# Set the item texture
	item_sprite.texture = item_resource.texture
	item_sprite.visible = true
	
	# Update stack count label if stackable
	if item_resource.stackable and item_resource.stack_count > 1:
		stack_label.text = str(item_resource.stack_count)
		stack_label.visible = true
	else:
		stack_label.visible = false

# Clear the slot (make it empty)
func clear_slot():
	item_resource = null
	item_sprite.texture = null
	item_sprite.visible = false
	stack_label.visible = false

# Check if slot is empty
func is_empty() -> bool:
	return item_resource == null
"

[sub_resource type="Resource" id="Resource_yoarh"]
script = ExtResource("1_blvnl")
id = "wood"
name = ""
texture = ExtResource("2_v062m")
item_type = 0
stackable = true
stack_count = 1
max_stack = 99
description = ""
value = 0

[node name="SingleSlot" type="Panel"]
offset_right = 40.0
offset_bottom = 40.0
script = SubResource("GDScript_rxior")
item_resource = SubResource("Resource_yoarh")

[node name="BackgroundSprite" type="Sprite2D" parent="."]

[node name="ItemSprite" type="Sprite2D" parent="."]

[node name="Number" type="Label" parent="."]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0
